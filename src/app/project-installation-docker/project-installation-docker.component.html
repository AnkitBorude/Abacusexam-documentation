<h2 nz-typography>Local Deployment Using Docker</h2>
<nz-divider></nz-divider>
<h3 nz-typography>Description</h3>
<div nz-row [nzGutter]="2">
        <div nz-col [nzSpan]="24">
          <nz-card nzTitle="Development Environment Features">
            <nz-list nzBordered>
              <nz-list-item>Docker-based development environment with hot-reload capabilities</nz-list-item>
              <nz-list-item>Node.js application with automatic code synchronization through volume mounting</nz-list-item>
              <nz-list-item>MongoDB database with persistent storage</nz-list-item>
              <nz-list-item>Environment variable configuration support</nz-list-item>
              <nz-list-item>Automatic container restart functionality</nz-list-item>
              <nz-list-item>Port mapping for both application and database services</nz-list-item>
            </nz-list>
          </nz-card>
        </div>
</div>
<div nz-row [nzGutter]="2" style="margin-top: 2rem;">
    <div nz-col [nzSpan]="12">
       <nz-card>
            <li>Application Service:
                       <ul>
                         <li>Uses Node.js development environment</li>
                         <li>Mounts local codebase to /opt/abacus-rest-api for live code updates</li>
                         <li>Configurable port mapping through APPLICATION_PORT environment variable</li>
                         <li>Runs in development mode with "npm run dev" command</li>
                       </ul>
                     </li>
                     <li>Database Service:
                       <ul>
                         <li>MongoDB instance with data persistence</li>
                         <li>Port 27018 exposed to host to avoid conflicts with local MongoDB installations</li>
                         <li>Utilizes Docker volume for persistent data storage</li>
                       </ul>
                     </li>
       </nz-card>
    </div>
    <div nz-col [nzSpan]="12">
        <nz-card>
            <ul>
                <li>Hot Reload Development:
                  <ul class="list-circle pl-6 mt-2 space-y-2">
                    <li>Code changes are immediately reflected without container rebuilds</li>
                    <li>Volume mounting ensures seamless development experience</li>
                  </ul>
                </li>
                <li>Dependency Management:
                  <ul>
                    <li>Container automatically restarts on crashes (unless-stopped policy)</li>
                    <li>Application service depends on database availability</li>
                  </ul>
                </li>
                <li>Data Persistence:
                  <ul>
                    <li>MongoDB data persists across container restarts</li>
                    <li>Dedicated Docker volume "mongodb_data" for database storage</li>
                  </ul>
                </li>
              </ul>
        </nz-card>
    </div>
</div>
<div nz-row [nzGutter]="2" [nzJustify]="'center'" [nzAlign]="'middle'" id="installation-guide">
  <div nz-col [nzSpan]="24" [align]="'center'">
    <nz-divider></nz-divider>
    <nz-steps [nzCurrent]="current" nzDirection="vertical">
      <nz-step nzTitle=" Clone the Repository" [nzDescription]="mytemplet1">
        <ng-template #mytemplet1>
          <nz-card style="background-color: rgb(0, 8, 15); color: white;">
            <p nz-typography style="color: inherit;">
              #Clone the Repository<br>
              <code>git clone
                git&#64;github.com:AnkitBorude/abacus-exam-backend.git</code><br>

              # Navigate to project directory<br>

              <code>cd abacus-exam-backend</code></p>
            <div *ngIf="current!=0;else nextbuttonTemplet"></div>
          </nz-card>
        </ng-template>
      </nz-step>
      <nz-step nzTitle="Environment Configuration" [nzDescription]="mytemplet2">
        <ng-template #mytemplet2>
          <nz-card style="background-color: rgb(0, 8, 15); color: white;">
            <p nz-typography style="color: inherit;">
              ##Create .env file<br>
                <code>touch .env</code><br>
              ## The <a href="/enviroment-variables">.env file</a> contains common environment variables required for all environments.<br>
              ##<b>Make sure of service name/container name in MONGODB_CONNECTION_URL</b>
            </p>
              <div *ngIf="current!=1;else nextbuttonTemplet"></div>
            </nz-card>
          </ng-template>
        </nz-step>
        <nz-step nzTitle="Build and Start the Containers for Local Development"
          [nzDescription]="mytemplet3">
          <ng-template #mytemplet3>
            <nz-card style="background-color: rgb(0, 8, 15); color: white;">
              <p nz-typography style="color: inherit;">
                ##Build and Start the Containers for Local Development:<br>
                <code>docker-compose -f docker-compose.dev.yml up --build</code><br>

                ##ensure docker daemon is running.
                ##building first time might take some time.
              </p>
              <div *ngIf="current!=2;else nextbuttonTemplet"></div>
            </nz-card>
          </ng-template>
        </nz-step>
        <nz-step nzTitle="Verify the Setup:"
          [nzDescription]="mytemplet4">
          <ng-template #mytemplet4>
            <nz-card style="background-color: rgb(0, 8, 15); color: white;">
              <p nz-typography style="color: inherit;">
                1. Check running containers: <code>docker ps</code><br>
                2. Open browser or Postman<br>
                3.  Access <code>http://localhost:port</code> on local
                developement<br>
                4. You should see API Welcome webpage<br>
                5. Ensure all services are running properly using Docker Desktop<br>
                6. Hot-reloading using nodemon makes change propagation without rebuilding whole project except new package installation<br>
                7. In Local developement enviroment <code>error.log</code> and <code>application.log</code> files are mounted and binded with host at Root level of project.as well as
                streamed to console<br>
              </p>
              <div *ngIf="current!=3;else nextbuttonTemplet"></div>
            </nz-card>
          </ng-template>
        </nz-step>
      </nz-steps>
    </div>
    <ng-template #nextbuttonTemplet>
      <button
        nz-button
        nzType="default"
        (click)="pre()"
        *ngIf="current > 0">
        <span>Previous</span>
      </button>
      <button style="margin-left: 1rem;"
        nz-button
        nzType="primary"
        (click)="next()"
        *ngIf="current < 10">
        <span>Next</span>
      </button>
    </ng-template>
  </div>